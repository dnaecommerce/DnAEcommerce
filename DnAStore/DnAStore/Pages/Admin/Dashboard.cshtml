@page
@model DnAStore.Pages.Admin.DashboardModel

@using DnAStore.Models.Interfaces
@inject IOrderManager Orders

@{ 
    var orders = Orders.GetAllOrders();
    var lastTenOrders = orders.OrderByDescending(order => order.ID)
                              .Take(10);
}

@{
    ViewData["Title"] = "Admin";
    Layout = "_Layout";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Admin</title>
</head>
<body>

    <h3>Manage Products</h3>
    <hr />
    <a asp-page="/Admin/Index" class="btn">Products</a>

    <h3>Recent Orders</h3>
    @foreach (var order in lastTenOrders)
    {
        <hr />
        <h4>Customer: @order.LastName, @order.FirstName</h4>
        <p>@order.OrderDateTime</p>
        <p>Order total: $@order.FinalTotal</p>
    }

</body>
</html>
